<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="css/styles.css">
	<title>Document</title>
</head>

<body>

	<main class="main">
		<div class="container">
			<div class="main__category">
				<article class="article__item">
					<h2 class="article__title title-article">
						Установка и запуск шаблона. Подготовка к работе
					</h2>

					<div class="article__body body-article">
						<h3>Установка шаблона</h3>
						<p>
							Первым делом следует разархивировать zip-архив в вашу папку проекта. Следите за тем, чтобы сама папка и её
							родительские папки не содержали в названии
							кириллицу, пробелы, символы # и !
						</p>
						<img src="img/01.png" alt="">
						<p>
							Если вы до этого момента не пользовались сборщиками GULP, WEBPACK и пакетным менеджером NPM, следует скачать и
							установить Node.js. Качайте версию
							рекомендованную для большинства.
						</p>
						<p>
							Далее, открываем терминал в этой папке проекта. Терминал может быть встроен или открыт отдельно от редактора.
							Рекомендую использовать терминал <a href="https://git-scm.com/downloads" data-type="URL"
								data-id="https://git-scm.com/downloads" target="_blank">GIT Bash</a>.
						</p>
						<p>
							Если вы до этого момента не пользовались сборщиком GULP введите в терминал команду <b>npm i gulp-cli -g</b> это
							установит GULP в систему глобально.
						</p>
						<p>
							После завершения установки GULP введите команду <strong>npm i</strong>
						</p>
						<blockquote>
							В процессе установки в терминале могут возникать сообщение с пометкой WARN на желтом фоне. Эти сообщения можно
							игнорировать. Но, если вы получаете
							сообщение ERR! красным цветом — это критическая ошибка и её нужно исправлять.
						</blockquote>
						<div class="body-article__images">
							<div class="body-article__left">
								<img src="img/02.png" alt="">
							</div>
							<div class="body-article__right">
								<img src="img/03.png" alt="">
							</div>
						</div>
						<p>
							Часто может возникнуть ошибка зависимостей устанавливаемых пакетов (плагинов), и в NPM выше 7й версии это приводит к
							критической ошибке и остановке инсталляции.
						</p>
						<p>
							Чтобы решить проблему выполните команду <strong>npm i --legacy-peer-deps</strong>, это запустит процесс установки
							игнорируя подобные несовместимости.
						</p>
						<blockquote>
							Помните — версии NodeJS и Python в вашей системе должны быть свежих версий.
						</blockquote>
						<p>
							После успешной установки, у вас появится папка node_modules и файл package-lock.json
						</p>
						<img src="img/04.png" alt="">
						<p>
							Подробнее про архитектуру папок и файлов ЧФ мы поговорим в следующей главе, а пока продолжаем подготовку к работе
						</p>

						<h3>Запуск шаблона и режимы работы</h3>
						<p>
							Шаблон «Чертоги Фрилансера» может выполнять несколько сценариев:
						</p>

						<ol>
							<li>
								Режим разработчика. Команда запуска <strong>npm run dev</strong>
							</li>
							<li>
								Режим продакшена. Команда запуска <strong>npm run dev</strong>
							</li>
							<li>
								Режим продакшена и отправка результата на сервер по FTP. Команда запуска <strong>npm run
									deploy</strong>
							</li>
							<li>
								Режим продакшена и создание ZIP-архива с результатом. Команда запуска <strong>npm run
									zip</strong>
							</li>
							<li>
								Режим продакшена без создания WEBP изображений и действий связанных с этим форматом. Команда запуска
								<strong>npm run devbuild</strong>
							</li>
						</ol>

						<p>Дополнительные команды:</p>
						<ol>
							<li>
								Ручное создание SVG спрайт. Команда запуску <strong>npm run sprite</strong>
							</li>
							<li>
								Конвертирование шрифтов с принудительной перезаписью файла стилей. Команда запуска <strong>npm run
									fonts</strong>
							</li>
						</ol>

						<h4>Режим разработчика</h4>
						<p>
							В режиме разработчика выполняются только необходимые для разработки задачи:
						</p>
						<ul>
							<li>
								Конвертация шрифтов и запись в файл стилей
							</li>
							<li>
								Конвертация SCSS файлов в CSS файлы, переименование псевдонимов
							</li>
							<li>
								Сборка НТМML файлов, переименование псевдонимов
							</li>
							<li>
								При использовании PUG, файлы преобразовываются в HTML, переименовываются псевдонимы
							</li>
							<li>
								Собираются JS файлы
							</li>
							<li>
								Запускается локальный сервер, открывается браузер с индексной страницей.
							</li>
							<li>
								Запускается наблюдатель за изменением фалов. При каждом изменении файла браузер обновляет страницу (кроме
								страницы-содержания)
							</li>
							<li>
								Копируются файлы из указанной папки
							</li>
							<li>
								HTML CSS JS файлы результата не записываются на диск <strong>(папка dist не создается)</strong>.
							</li>
						</ul>
						<blockquote>
							Если у вас слабый ПК (мало ОЗУ) или шаблон со временем начинает тормозить, откройте файл
							<strong>config/webpack.dev.js</strong>
							и раскомментируйте блок :
						</blockquote>
						<pre class="copy-code">
							<code class="css">
								<span class="tag">devMiddleware</span>: {
								<span class="attribute">writeToDisk</span>: <span class="value">true,</span>
								},
							</code>
						</pre>
						<blockquote>
							Параметр включит создание папки <strong>dist</strong> в режиме разработчика, что повысит скорость работы на слабых
							ПК.
						</blockquote>

						<h4>Режим продакшена</h4>
						<p>
							В режиме продакшена выполняется финализация проекта, а именно:
						</p>
						<ul>
							<li>
								Конвертация шрифтов и запись в файл стилей
							</li>
							<li>
								Конвертация изображений в WEBP формат. Сжатие и оптимизация JPG PNG SVG картинок
							</li>
							<li>
								Конвертация SCSS файлов в CSS файлы, переименование псевдонимов, группировка медиа-запросов, добавляются вендорные
								префиксы для обеспечения
								кроссбраузерности, обрабатывается подключение WЕВР изображений, производится сжатие и оптимизация конечного файла
								(также создается несжатая копия)
							</li>
							<li>
								Сборка НТМL файлов, переименование псевдонимов, обрабатывается подключение WEBP изображений
							</li>
							<li>
								При использовании PUG, файлы преобразовываются в HTML, переименовываются псевдонимы, обрабатывается подключение
								WEBP изображений
							</li>
							<li>
								Собираются JS файлы, производится сжатие и оптимизация конечного файла. В результат попадает только используемый
								код. Итогом задачи будет создание
								двух файлов: сжатого app.min.js (подключен к HTML) и не сжатого app.js для дальнейшего редактирования другими
								специалистами.
							</li>
							<li>
								Копируются файлы из указанной папки
							</li>
							<li>
								Все файлы с результатом записываются на диск (обычно в папку dist), локальный сервер не запускается
							</li>
						</ul>
						<blockquote>
							Итак, давайте же запустим наш шаблон в режиме разработчика, для этого в терминале выполняем команду <strong>npm run
								dev</strong>
						</blockquote>
						<p>
							После запуска система выполнет все задачи режима разработчика описанные выше. Результатом работы должна стать открытая
							в браузере страница содержания.
						</p>
						<blockquote>
							Внимание, страница содержания не обновляется автоматически при её редактировании
						</blockquote>
						<div class="body-article__images">
							<div class="body-article__left">
								<img src="img/06.png" alt="">
							</div>
							<div class="body-article__right">
								<img src="img/07.png" alt="">
							</div>
						</div>

						<img src="img/08.jpg" alt="">

						<h3>Возможные ошибки и их решения</h3>
						<p>
							Если браузер не запустился, а в терминале видны ошибки (ERR!) убедитесь что:
						</p>
						<ul>
							<li>
								У вас установлен Node.js и Python последней версии
							</li>
							<li>
								Терминал открыт с правами администратора
							</li>
							<li>
								В названиях папок на всем пути к проекту нет символа # или !
							</li>
							<li>
								Папки и файлы должны быть названы латиницей без пробелов
							</li>
							<li>
								Тer img и его содержимое должны быть записаны в одну строку без переносов
							</li>
							<li>
								В атрибуте src должен быть указан путь к существующей картинке без пробелов
							</li>
						</ul>
						<p>
							При ошибке связанной с node-sass, запустите команду <strong>npm rebuild node-sass</strong><br>
							При ошибке связанной с Python запустите команду <strong>npm install -g windows-build-tools</strong><br>
							При ошибке Error [ERR_UNSUPPORTED_ESM_URL_SCHEME]:
						</p>
						<ol>
							<li>Качаем версию 14.15.1
								<a rel="noreferrer noopener" href="https://nodejs.org/dist/v14.15.1/"
									target="_blank">(https://nodejs.org/dist/v14.15.1/)</a>
							</li>
							<li>
								Заходим в папку с установленным NodeJS, распаковываем содержимое архива в папку с заменой файлов.
							</li>
							<li>
								Далее идем сюда «Панель управления» => «Система» => «Дополнительные параметры системы» => «Дополнительно» =>
								«Переменные среды»
							</li>
							<li>
								В Системных переменных "Создать" переменную с именем 'NODE_SKIP_PLATFORM_CHECK' и создаем ей значение '1'.
							</li>
							<li>
								Перезапускаем систему и запускаем шаблон согласно инструкции
							</li>
						</ol>

						<h3>Подготовка редактора к комфортной работе с шаблоном</h3>
						<blockquote>
							Для того чтобы наслаждаться возможностями шаблона ЧФ по полной, нам следует произвести некоторые настройки редактора.
							В качестве примера представлен
							редактор VS Code
						</blockquote>
						<h4>Настройка псевдонимов</h4>
						<p>
							В главе Архитектура шаблона. Файлы и папки вы узнаете что различные части HTML/PUG SCSS файлов находятся на разных
							уровнял вложенности, что создает
							определенные неудобства при подключении, например картинок, в процессе разработки.
						</p>
						<p>
							Неудобства мы не любим поэтому настроим, так называемые, псевдонимы (алиасы) путей к папкам. Для этого нам нужно
							установить плагин Path Autocomplete.
							После установки открываем настройки редактора (settings.json), для этого жмем F1 в редакторе и в строке поиска пишем
							Open Settings и жмем на ссылку Ореп Settings (JSON).
						</p>
						<p>
							В этот файл нужно аккуратно вставить следующий код:
						</p>
						<img src="img/" alt="">
						<pre class="copy-code">
							<code class="perl">
								<span class="string">"path-autocomplete pathMappings"</span>: {
								<span class="string">"<span class="variable">@img</span>"</span>: <span class="string">"<span class="subst">${folder}</span>/src/img"</span>, <span class="regexp">//</span> alias <span class="keyword">for</span> images
								<span class="string">"<span class="variable">@scss</span>"</span>: <span class="string">"<span class="subst">${folder}</span>/src/scss"</span>, <span class="regexp">//</span> alias <span class="keyword">for</span> scss
								<span class="string">"<span class="variable">@js</span>"</span>: <span class="string">"<span class="subst">${folder}</span>/src/js"</span>, <span class="regexp">//</span> alias <span class="keyword">for</span> js
							}
							</code>
						</pre>
						<p>
							Очень важно соблюдать синтаксис JSON, обращайте внимания на запятые:
						</p>
						<img src="img/09.png" alt="">
						<p>
							После этого вы смело можете использовать псевдонимы при подключении файлов, например:
						</p>
						<pre class="copy-code">
							<code class="xml"><span class="tag">&lt;<span>img</span> <span class="attribute">src</span>=<span class="value">"@img/cover.jpg"</span><span class="attribute">alt</span>=<span class="value">"Рисунок"</span>&gt;</span>
							</code>
						</pre>
						<p>
							Редактор распознает псевдоним и выведет список файлов в указанной папке, а во время сборки система сама поменяет
							псевдоним на нужный путь!
						</p>

						<h4 id="snippets">Настройка сниппетов</h4>
						<p>
							Сниппеты - это короткие коды которые могут вызывать готовые заготовки кода любого объема. Это колоссально повышает
							скорость разработки.
						</p>
						<p>
							Конечно же, я использовал эту супер возможность в своих чертогах. То есть, построение, например, правильной HTML
							структуры для того или иного JS модуля я добавил в СНИПЕТ.
						</p>
						<p>
							Чтобы добавить набор сниппетов из шаблона к себе в редактор выполняем следующие действия:
						</p>
						<ol>
							<li>
								Открываем файл snnipets.txt из архива ЧФ и копируем все содержимое
							</li>
							<li>
								В редакторе VS Code переходим в настройки (шестеренка) -> User Snippets->New Global Snippets File пишем название,
								например fls, и заменяем содержимое на скопированное из snnipets.txt

							</li>
							<li>
								При обновлении шаблона и сниппетов создавать новый файл не нужно, следует открыть существующий и обновить
								содержимое

							</li>
						</ol>
						<blockquote>
							Вы можете создавать и добавлять свои сниппеты, поможет в этом сервис
							https://snippet-generator.app/
						</blockquote>
					</div>
				</article>
			</div>
		</div>
	</main>

</body>

</html>